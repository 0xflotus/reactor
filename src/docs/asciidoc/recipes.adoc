[[recipe-filestream]]
=== Building a simple File Stream

.Build a lazy file read Publisher matching the Subscriber request and reuse Reactor Stream base machinery like PushSubscription
[source, java, indent=2]
----
Stream<String> fileStream = new Stream<String>() {
	@Override
	public void subscribe(final Subscriber<? super String> subscriber) {
		final File file = new File("settings.gradle");

		try {
			final BufferedReader is = new BufferedReader(new FileReader(file));
			subscriber.onSubscribe(new PushSubscription<String>(this, subscriber) {

				@Override
				protected void onRequest(long n) {
					long requestCursor = 0l;
					try {
						String line;
						while ((requestCursor++ < n || n == Long.MAX_VALUE)
											&& !isComplete()) {
							line = is.readLine();
							if(line != null) {
								onNext(line);
							} else {
								onComplete();
								return;
							}
						}
					} catch (IOException e) {
						onError(e);
					}
				}
			});

		} catch (FileNotFoundException e) {
			Streams.<String, FileNotFoundException>fail(e)
				.subscribe(subscriber);
		}
	}
};

fileStream
	.subscribe(new Subscriber<String>() {
		final long chunkSize = 4;

		Subscription subscription;
		long cursor = 0;

		@Override
		public void onSubscribe(Subscription s) {
			subscription = s;
			s.request(chunkSize);
		}

		@Override
		public void onNext(String s) {
			System.out.println(s);
			if(++cursor == chunkSize){
				cursor = 0;
				subscription.request(chunkSize);
			}
		}

		@Override
		public void onError(Throwable t) {
			t.printStackTrace();
		}

		@Override
		public void onComplete() {
			System.out.println("## EOF ##");
		}
});
----

=== Building Efficient Data Pipelines

=== Building Non-Blocking MicroServices

=== Building CQRS-like Applications

=== Other Example Applications

[horizontal]
https://github.com/reactor/reactor-quickstart[Quickstart]::
An example application showing several ways to use basic components in Reactor.
https://github.com/reactor/reactor-samples[Samples]::
A simple sample application that demonstrates Reactor functionality in JUnit tests.